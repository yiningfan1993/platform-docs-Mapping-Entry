**********************
Order List
**********************

Order list is a centralized space for users to create order, manage order, monitor order status and review deliverables. 

 .. figure:: /images/OrderListInterface.png
    :align: center
    :alt: OrderListInterface

    *General Interface of Order List*

Create Order
******************

Users can start a new order by clicking on the |CreateOrder| button located on the top-right of the interface. 

.. The following options will be available:

.. Service type:

..    * Modeling & Annotation: the order will apply modeling and Ecopia annotation as the service;
..    * Modeling: the order will apply modeling and users will annotate the vector result (if applicable) within their own organization.

Click on "Submit" after setting the order name, the order list page will jump to basic settings page for users to provide more detailed information. The settings page can also be opened by clicking |ViewDetails| in the action column of each order.

Action: Settings |ViewDetails|
*************************************

Users can view and edit details of the order by clicking on |ViewDetails| button in the action column. The order list page will jump to basic settings once a new order is created for users to provide more information about the order.

Input Data
===============

This page contains setting information for order's AOI and corresponding imagery data that will be used for production.

Order's AOI Data
------------------

By clicking on the space on the top right corner, users can upload the AOI file from local machine. Once uploaded, the AOI will be listed under **Order's AOI Data** section of the page.

.. note::
      The AOI file needs to be in zipped shapefile format and smaller than 4 MB.


AOI Actions
--------------------

Once the AOI and imagery data has been added to the order. The following actions needs to be completed before proceeding with the order.


Preview AOI |PreviewAOI|
+++++++++++++++++++++++++++++

By clicking |PreviewAOI| button, users can review the uploaded AOI file overlay with Google Maps.


The **AOI Status** and **Coverage** column will change accordingly based on the coverage check status.

.. list-table:: Coverage Check Status
   :widths: 30 30 70 70
   :header-rows: 1
   :class: tight-table

   * - Coverage Check
     - AOI Status
     - Coverage
     - Note
   * - Coverage check not started
     - AOI Init
     - Need to check
     - Click |CheckCoverage| button to start coverage check, or choose manual confirm
   * - Coverage check passed
     - Coverage Checked
     - |Passed|: Coverage check has passed
     - automatically switch to **Coverage Checked** Status
   * - Coverage check failed
     - AOI Init
     - Options:
        * |ViewCoverageReport|: Visualize AOI and missing area
        * |ManualConfirm|: Ignore missing area and proceed with current coverage
     - Email notification will be sent to order owner

Remove AOI |DeleteAOI|
++++++++++++++++++++++++++

AOI will be removed once click on the |DeleteAOI| button.

Imagery Timeline
---------------------------

 In order to have the system generate the most accurate estimate delivery time, users are required to provide **Expect Image Arrivel** time and confirm when the imagery actually arrives.


Order's Imagery Data
----------------------------

Imagery datasets that will be used for this order will be listed in this section. By clicking on the "Add Imagery" button in the **Order's Imagery Data** section, users can add imagery data to the order by providing the following information:

    * Name: name of the imagery data
    * Category: 2D or 3D imagery data
    * Imagery Type: Satellite or Aerial
    * Image Path: Ecopia provides different types of data transfer protocol. Users can select the one that best filt their needs from the protocol dropdown list.

.. figure:: /images/AddStandardImagery.png
    :alt: AddStandardImagery
    :align: center

    *Add Standard Imagery*

After the information is provided, click on "Submit". In the following window, bind the imagery data with AOI that will be used for feature extraction and click on "Confirm" to complete the imagery adding process.

 
Extraction Settings
====================

This space allows users to select desired features (Catetitle) to be extracted from the provided imagery.

#. A list of standard product packages are listed on top of the catetitles. Users can select one or multiple and corresponding catetiles will be automatically selected in the catetitle list below.
#. Select Catetitle: by clicking on the checkbox next to each Catetitle

    * Catetitles are categorized into 3 different Categories:
        * **Raster**: include DSM and orthomosaic data generated through production pipeline
        * **2D Landcover**: includes building, road, manmade and natural landcover features; height attribute can be selected to construct 3D landcover data
        * **Advanced Transportation**: includes different types of transportation related centerlines, road marking, signs and other transportation features that can be used for guiding and navigation
    * For definition of each Catetitle, please refer to Glossary for more details.


#. Users can select the category in general or select second-tier categories to further differentiate the features

    .. figure:: /images/SecondTier.png
        :alt: Second-Tier Categories
        :align: center

        *Example of Second-Tier Category*

#. Selected Catetitles will be reflected in the **Advanced settings for selected products** section in the settings
#. In the **Advanced settings for selected products** section, users can modify the catetitle name in the delivery shapefile.
    
    * Catetitle name in the delivery shapefile can be modified by clicking on the edit button;
    * Special capturing rules can be added to advance settings to provide production team with clear instructions.


        .. figure:: /images/catetitleAdvancedSettings.png
            :alt: Catetitle Advanced Settings
            :align: center

        *Catetitle Advanced Settings*


#. To help Ecopia team better understand the extraction requirements, users can attach supporting document in the **Attached Document for Extraction Request** section.
#. Click on "Save & Continue" to apply the changes and continue to Area of Interest.

 .. figure:: /images/ExtractionSettings.png
    :align: center
    :alt: ExtractionSettings
    

    *Extraction Settings*







Delivery Settings
====================

Users can define how the data should be delivered by providing the following information in the delivery settings section:

#. **Delivery Projection**: projection system that should be applied to the vector result. The following options are available:

    * WGS84
    * WGS84/UTM
    * OTHER
    * Provide EPSG and added as an option

#. **Delivery Format**: data format that the vector result will be delivered in
#. **Deliver Grid Size**: grid can be applied to the vector result to split larger polygon into smaller pieces. 

Click on "Save & Continue" to apply all changes and move to **Order Payment** section.

Quote & Place Order
=====================

Once the AOI information and extraction settings are provided through previous pages, users can obtain quote information and place order to put the order into production.

Quote
----------------------------
User can obtain quote information by clicking on the :guilabel:`Quote` button. At this stage, the system is calculating the quote for the order based on the extraction settings and size of the AOI. The process will normally take a few minutes to complete.

.. figure:: /images/CalculatingQuote.png
    :alt: Calculating Quote
    :align: center

    *Quote is being Calculated*

The following information will be provided:

    #. **Cost Quotation(USD)**: quotation for this prodction order in USD;
    #. **Delivery Days**: number of days required for production team to deliver the result;
    #. **Quotation Expired Time**: the expiration time of the current quote
    #. **Order Place Status**: current status of the order

        * Not Applied: the order has not been placed by the current users.
        * Order has been placed at ... : order has been placed at certain time stamp and system has sent notification to the production admin.

Place Order
----------------------------
Once the quote is calculated, users can place order by clicking on the :guilabel:`Place Order`. After the order is placed, the production team will receive notification and the production process will be triggered.

.. figure:: /images/PlaceOrder.png
    :alt: PayNow
    :align: center

    *Order is ready to be placed*


Action: Delete Order |DeleteAOI|
*********************************
Users can delete an order by clicking on the |DeleteAOI| button in the action column.


Delivery |Delivery|
********************
Email notification will be sent to order owner once the vector result is delivered. By clicking on the |Delivery| button, users can view the deliveries and their path on the platform. To download the vector results


.. |CreateOrder| image:: /images/CreateOrder.png
    :height: 21

.. |ViewDetails| image:: /images/ViewDetails.png
    :height: 21

.. |binddataset| image:: /images/binddataset.png
    :height: 21

.. |checkcoverage| image:: /images/checkcoverage.png
    :height: 21

.. |ViewCoverageReport| image:: /images/ViewCoverageReport.png
      :height: 25

.. |ManualConfirm| image:: /images/ManualConfirm.png
      :height: 20

.. |Passed| image:: /images/GreenCheck.png
      :height: 20

.. |PreviewAOI| image:: /images/PreviewAOI.png
      :height: 25

.. |DeleteAOI| image:: /images/DeleteAOI.png
      :height: 32

.. |Delivery| image:: /images/Delivery.png
      :height: 30